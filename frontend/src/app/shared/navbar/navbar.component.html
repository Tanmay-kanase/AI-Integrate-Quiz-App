<header
  [ngClass]="{ 'sticky-navbar': isSticky }"
  class="navbar sticky-navbar transition-all duration-300 ease-in-out"
>
  <nav
    class="bg-white dark:bg-gray-900 shadow-sm py-4 transition-colors duration-300"
  >
    <div class="container mx-auto px-4 flex justify-between items-center">
      <!-- Logo/App Name -->
      <a
        href="#"
        class="text-gray-600 dark:text-gray-300 hover:text-indigo-600 dark:hover:text-indigo-400"
      >
        AI QuizMaster
      </a>

      <!-- Desktop Navigation Links -->
      <div class="hidden md:flex space-x-6">
        <ng-container *ngIf="isLoggedIn">
          <a
            routerLink="/quiz-attendance"
            class="text-gray-600 hover:text-indigo-600 font-medium transition-colors duration-300 rounded-lg p-2 hover:bg-gray-100"
            >Quiz</a
          >

          <a
            routerLink="/create-quiz"
            class="text-gray-600 hover:text-indigo-600 font-medium transition-colors duration-300 rounded-lg p-2 hover:bg-gray-100"
            >Create Quiz</a
          >
          <a
            href="#contact"
            class="text-gray-600 hover:text-indigo-600 font-medium transition-colors duration-300 rounded-lg p-2 hover:bg-gray-100"
            >Contact</a
          ></ng-container
        >
        <ng-container *ngIf="!isLoggedIn">
          <a
            routerLink="signin"
            class="text-gray-600 hover:text-indigo-600 font-medium transition-colors duration-300 rounded-lg p-2 hover:bg-gray-100"
            >Sign In</a
          >
          <a
            routerLink="signup"
            class="bg-indigo-600 text-white px-5 py-2 rounded-full shadow-md hover:bg-indigo-700 transition-all duration-300 transform hover:scale-105"
            >Sign Up</a
          ></ng-container
        >
      </div>
      <div class="flex gap-8">
        <!-- Dark Mode Toggle Button -->
        <button
          (click)="toggleDarkMode()"
          class="rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition hidden md:block"
          aria-label="Toggle Dark Mode"
        >
          <svg
            *ngIf="!isDarkMode"
            class="w-10 h-10 text-gray-600"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <!-- Moon icon -->
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M21 12.79A9 9 0 1111.21 3a7 7 0 109.79 9.79z"
            />
          </svg>

          <svg
            *ngIf="isDarkMode"
            class="w-10 h-10 text-yellow-400"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <!-- Sun icon -->
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M12 3v2m6.364.636l-1.414 1.414M21 12h-2m-.636 6.364l-1.414-1.414M12 21v-2m-6.364-.636l1.414-1.414M3 12h2m.636-6.364l1.414 1.414M12 8a4 4 0 100 8 4 4 0 000-8z"
            />
          </svg>
        </button>
        <!-- Profile dropdown when logged in -->
        <div *ngIf="isLoggedIn" class="relative group hidden md:block">
          <div
            class="w-10 h-10 rounded-full bg-gray-300 flex items-center justify-center cursor-pointer text-gray-700 font-semibold uppercase select-none hover:bg-gray-400 transition"
          >
            {{ user?.name?.charAt(0) }}
          </div>

          <div
            class="absolute right-0 mt-2 w-40 bg-white shadow-md rounded-lg group-hover:visible py-2 transition invisible"
          >
            <a routerLink="/profile" class="block px-4 py-2 hover:bg-gray-100"
              >Profile</a
            >
            <a
              routerLink="/edit-profile"
              class="block px-4 py-2 hover:bg-gray-100"
              >Edit Profile</a
            >
            <button
              (click)="logout()"
              class="block w-full px-4 py-2 text-left text-red-600 hover:bg-gray-100"
            >
              Logout
            </button>
          </div>
        </div>
      </div>

      <!-- Mobile Menu Button (Hamburger) -->
      <div class="md:hidden">
        <button
          (click)="toggleMenu()"
          class="text-gray-600 hover:text-indigo-600 focus:outline-none p-2 rounded-lg hover:bg-gray-100"
        >
          <svg
            class="w-6 h-6"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M4 6h16M4 12h16M4 18h16"
            ></path>
          </svg>
        </button>
      </div>
    </div>

    <!-- Mobile Menu (Hidden by default) -->
    <div
      *ngIf="isMenuOpen"
      class="md:hidden bg-white dark:bg-gray-900 py-2 shadow-md"
    >
      <ng-container *ngIf="isLoggedIn">
        <a
          routerLink="/quiz-attendance"
          (click)="toggleMenu()"
          class="block px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-indigo-50 dark:hover:bg-gray-800"
        >
          Quiz
        </a>

        <a
          routerLink="/create-quiz"
          (click)="toggleMenu()"
          class="block px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-indigo-50 dark:hover:bg-gray-800"
        >
          Create Quiz
        </a>

        <button
          (click)="logout()"
          class="block w-full text-left px-4 py-2 text-red-600 hover:bg-indigo-50 dark:hover:bg-gray-800"
        >
          Logout
        </button>
      </ng-container>

      <ng-container *ngIf="!isLoggedIn">
        <a
          routerLink="/signin"
          (click)="toggleMenu()"
          class="block px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-indigo-50 dark:hover:bg-gray-800"
        >
          Sign In
        </a>

        <a
          routerLink="/signup"
          (click)="toggleMenu()"
          class="block px-4 py-2 text-indigo-600 font-semibold hover:bg-indigo-50 dark:hover:bg-gray-800"
        >
          Sign Up
        </a>
      </ng-container>
    </div>

    <ng-container *ngIf="!isLoggedIn">
      <a
        routerLink="/signin"
        (click)="toggleMenu()"
        class="block px-4 py-2 text-gray-700 dark:text-gray-300 hover:bg-indigo-50 dark:hover:bg-gray-800"
      >
        Sign In
      </a>

      <a
        routerLink="/signup"
        (click)="toggleMenu()"
        class="block px-4 py-2 text-indigo-600 font-semibold hover:bg-indigo-50 dark:hover:bg-gray-800"
      >
        Sign Up
      </a>
    </ng-container>
  </nav>
</header>
